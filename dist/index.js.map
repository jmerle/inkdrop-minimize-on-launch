{"version":3,"sources":["../src/index.js"],"names":["listener","activate","inkdrop","isMainWindow","remote","process","argv","includes","lastProcessId","config","get","currentProcessId","pid","set","onAppReady","window","minimize","deactivate","dispose"],"mappings":";;;;;;;;AAAA;;AAEA,IAAIA,QAAQ,GAAG,IAAf;;AAEO,SAASC,QAAT,GAAoB;AACzB,MAAI,CAACC,OAAO,CAACC,YAAb,EAA2B;AACzB;AACD;;AAED,MAAI,CAACC,iBAAOC,OAAP,CAAeC,IAAf,CAAoBC,QAApB,CAA6B,aAA7B,CAAL,EAAkD;AAChD;AACD;;AAED,QAAMC,aAAa,GAAGN,OAAO,CAACO,MAAR,CAAeC,GAAf,CAAmB,wBAAnB,KAAgD,CAAC,CAAvE;AACA,QAAMC,gBAAgB,GAAGP,iBAAOC,OAAP,CAAeO,GAAxC,CAVyB,CAYzB;AACA;AACA;AACA;;AACA,MAAIJ,aAAa,KAAKG,gBAAtB,EAAwC;AACtC;AACD;;AAEDT,EAAAA,OAAO,CAACO,MAAR,CAAeI,GAAf,CAAmB,wBAAnB,EAA6CF,gBAA7C,EApByB,CAsBzB;AACA;;AACAX,EAAAA,QAAQ,GAAGE,OAAO,CAACY,UAAR,CAAmB,MAAM;AAClCZ,IAAAA,OAAO,CAACa,MAAR,CAAeC,QAAf;AACD,GAFU,CAAX;AAGD;;AAEM,SAASC,UAAT,GAAsB;AAC3B,MAAIjB,QAAQ,KAAK,IAAjB,EAAuB;AACrBA,IAAAA,QAAQ,CAACkB,OAAT;AACAlB,IAAAA,QAAQ,GAAG,IAAX;AACD;AACF","sourcesContent":["import { remote } from 'electron';\n\nlet listener = null;\n\nexport function activate() {\n  if (!inkdrop.isMainWindow) {\n    return;\n  }\n\n  if (!remote.process.argv.includes('--minimized')) {\n    return;\n  }\n\n  const lastProcessId = inkdrop.config.get('minimize-on-launch.pid') || -1;\n  const currentProcessId = remote.process.pid;\n\n  // If the process id is the same as the last saved id, we can assume the\n  // window was simply reloaded. While there is a chance for the pid to be the\n  // same during restarts, there is no better way to differentiate between an\n  // app restart and a window reload.\n  if (lastProcessId === currentProcessId) {\n    return;\n  }\n\n  inkdrop.config.set('minimize-on-launch.pid', currentProcessId);\n\n  // The window is not always restored to the correct size if it is minimized\n  // before the app is ready.\n  listener = inkdrop.onAppReady(() => {\n    inkdrop.window.minimize();\n  });\n}\n\nexport function deactivate() {\n  if (listener !== null) {\n    listener.dispose();\n    listener = null;\n  }\n}\n"],"file":"index.js"}