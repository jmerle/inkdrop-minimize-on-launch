{"version":3,"sources":["../src/index.js"],"names":["listener","activate","inkdrop","isMainWindow","lastProcessId","config","get","currentProcessId","remote","process","pid","set","onAppReady","window","minimize","deactivate","dispose"],"mappings":";;;;;;;;AAAA;;AAEA,IAAIA,QAAQ,GAAG,IAAf;;AAEO,SAASC,QAAT,GAAoB;AACzB,MAAI,CAACC,OAAO,CAACC,YAAb,EAA2B;AACzB;AACD;;AAED,QAAMC,aAAa,GAAGF,OAAO,CAACG,MAAR,CAAeC,GAAf,CAAmB,wBAAnB,KAAgD,CAAC,CAAvE;AACA,QAAMC,gBAAgB,GAAGC,iBAAOC,OAAP,CAAeC,GAAxC,CANyB,CAQzB;AACA;AACA;AACA;;AACA,MAAIN,aAAa,KAAKG,gBAAtB,EAAwC;AACtC;AACD;;AAEDL,EAAAA,OAAO,CAACG,MAAR,CAAeM,GAAf,CAAmB,wBAAnB,EAA6CJ,gBAA7C,EAhByB,CAkBzB;AACA;;AACAP,EAAAA,QAAQ,GAAGE,OAAO,CAACU,UAAR,CAAmB,MAAM;AAClCV,IAAAA,OAAO,CAACW,MAAR,CAAeC,QAAf;AACD,GAFU,CAAX;AAGD;;AAEM,SAASC,UAAT,GAAsB;AAC3B,MAAIf,QAAQ,KAAK,IAAjB,EAAuB;AACrBA,IAAAA,QAAQ,CAACgB,OAAT;AACAhB,IAAAA,QAAQ,GAAG,IAAX;AACD;AACF","sourcesContent":["import { remote } from 'electron';\n\nlet listener = null;\n\nexport function activate() {\n  if (!inkdrop.isMainWindow) {\n    return;\n  }\n\n  const lastProcessId = inkdrop.config.get('minimize-on-launch.pid') || -1;\n  const currentProcessId = remote.process.pid;\n\n  // If the process id is the same as the last saved id, we can assume the\n  // window was simply reloaded. While there is a chance for the pid to be the\n  // same during restarts, there is no better way to differentiate between an\n  // app restart and a window reload.\n  if (lastProcessId === currentProcessId) {\n    return;\n  }\n\n  inkdrop.config.set('minimize-on-launch.pid', currentProcessId);\n\n  // The window is not always restored to the correct size if it is minimized\n  // before the app is ready.\n  listener = inkdrop.onAppReady(() => {\n    inkdrop.window.minimize();\n  });\n}\n\nexport function deactivate() {\n  if (listener !== null) {\n    listener.dispose();\n    listener = null;\n  }\n}\n"],"file":"index.js"}